@page "/users/edit/{id}"

<PageTitle>Edit User Information</PageTitle>

<div style="display: flex; justify-content: center; margin-top: 2rem;">
    <RadzenCard Class="rz-p-4 rz-border" Style="width: 500px;">
        <RadzenStack Orientation="Orientation.Vertical" Gap="1.5rem">
            <RadzenText TextStyle="TextStyle.H5" Class="rz-mb-3">Edit User Information</RadzenText>

            @if (IsLoading)
            {
                <RadzenProgressBar Mode="ProgressBarMode.Indeterminate" Style="width: 100%;" />
            }
            else if (HasError)
            {
                <RadzenAlert Severity="AlertSeverity.Error" Summary="Error" Detail="Failed to load user profile. Please try again later." />
                @if (!string.IsNullOrEmpty(ErrorMessage))
                {
                    <RadzenText TextStyle="TextStyle.Body1">@ErrorMessage</RadzenText>
                }
            }
            else
            {
                <EditForm Model="@User" OnValidSubmit="SaveUserAsync">
                    <DataAnnotationsValidator />
                    <ValidationSummary />

                    <!-- User Name -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">User Name</RadzenText>
                    <RadzenTextBox @bind-Value="User.UserName" Style="width: 100%;" Placeholder="Enter user name" />
                    <ValidationMessage For="@(() => User.UserName)" />

                    <!-- First Name -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">First Name</RadzenText>
                    <RadzenTextBox @bind-Value="User.FirstName" Style="width: 100%;" Placeholder="Enter first name" />
                    <ValidationMessage For="@(() => User.FirstName)" />

                    <!-- Last Name -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">Last Name</RadzenText>
                    <RadzenTextBox @bind-Value="User.LastName" Style="width: 100%;" Placeholder="Enter last name" />
                    <ValidationMessage For="@(() => User.LastName)" />

                    <!-- Email -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">Email Address</RadzenText>
                    <RadzenTextBox @bind-Value="User.Email" Style="width: 100%;" Placeholder="Enter email" />
                    <ValidationMessage For="@(() => User.Email)" />

                    <!-- Phone Number -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">Phone Number</RadzenText>
                    <RadzenTextBox @bind-Value="User.PhoneNumber" Style="width: 100%;" Placeholder="Enter phone number" />
                    <ValidationMessage For="@(() => User.PhoneNumber)" />

                    <!-- Date of Birth -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">Date of Birth</RadzenText>
                    <RadzenDatePicker @bind-Value="User.DateOfBirth" DateFormat="MM/dd/yyyy" Style="width: 100%;" Placeholder="Select date of birth" />
                    <ValidationMessage For="@(() => User.DateOfBirth)" />

                    <!-- Is Active -->
                    <RadzenText TextStyle="TextStyle.Body1" Class="rz-mb-1">Is Active</RadzenText>
                    <RadzenCheckBox @bind-Value="User.IsActive" />

                    <!-- Action Buttons -->
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="1rem" JustifyContent="JustifyContent.End" Style="margin-top: 2rem;">
                        <RadzenButton ButtonStyle="ButtonStyle.Primary" Icon="save" Disabled="@IsSaving" Text="@(IsSaving ? "Saving..." : "Save")" Type="Submit" Style="min-width: 120px;" />
                        <RadzenButton ButtonStyle="ButtonStyle.Secondary" Icon="cancel" Text="Cancel" Click="@(() => NavigationManager.NavigateTo("/users"))" Style="min-width: 120px;" />
                    </RadzenStack>
                </EditForm>
            }
        </RadzenStack>
    </RadzenCard>
</div>
