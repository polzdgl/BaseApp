@inherits LayoutComponentBase

<div class="main-layout">
    <!-- Top Navigation Bar -->
    <header class="top-bar">
        <!-- Title as a Home Button -->
        <RadzenButton Icon="home" Text="BaseApp.Web" Click="NavigateToHome" Class="navbar-title-button" />

        <!-- Navigation Buttons on the Right -->
        <div class="nav-buttons">
            <RadzenButton Text="Users" Click="NavigateToUsers" />

            @if (string.IsNullOrEmpty(UserName))
            {
                <RadzenButton Icon="person" Text="Login" Click="NavigateToLogin" Class="login-button" />
            }
            else
            {
                <!-- Dropdown Menu Example -->
                <RadzenSplitButton Icon="person" Text="@UserName" Data="@dropdownItems" Click="OnDropdownItemClick">
                    <ChildContent>
                        @foreach (var item in dropdownItems)
                        {
                            <RadzenSplitButtonItem Text="@item.Text" Value="@item.Value" />
                        }
                    </ChildContent>
                </RadzenSplitButton>
            }
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="content-body">
        <article class="content">
            @Body
        </article>
    </div>
</div>

<RadzenComponents />
<HeadContent>
    <RadzenTheme Theme="material" />
</HeadContent>

@code {
    [Inject] NavigationManager NavigationManager { get; set; } = default!;

    private List<DropdownItem> dropdownItems = new()
    {
        new DropdownItem { Text = "Profile", Value = "profile" },
        new DropdownItem { Text = "Settings", Value = "settings" },
        new DropdownItem { Text = "Logout", Value = "logout" }
    };

    private void NavigateToHome()
    {
        NavigationManager.NavigateTo("/");
    }

    private void NavigateToUsers()
    {
        NavigationManager.NavigateTo("/users");
    }

    private void NavigateToLogin()
    {
        NavigationManager.NavigateTo("/login");
    }

    private void OnDropdownItemClick(RadzenSplitButtonItem args)
    {
        // Handle null args or null Value
        if (args?.Value == null)
        {
            // Default action for null value is Profile
            NavigationManager.NavigateTo("/profile");
            return;
        }

        switch (args.Value?.ToString())
        {
            case "settings":
                NavigationManager.NavigateTo("/settings");
                break;
            case "profile":
                NavigationManager.NavigateTo("/profile");
                break;
            case "logout":
                // Handle logout logic here
                break;
            default:
                NavigationManager.NavigateTo("/profile");
                break;

        }
    }

    private class DropdownItem
    {
        public string Text { get; set; }
        public string Value { get; set; }
    }

    private string UserName { get; set; } = "User1";
}
